# javascript-convenience-store-precourse

우아한테크코스 웹 프론트엔드 7기 4주차 미션 - 편의점을 구현한 저장소입니다.


<img src="https://github.com/user-attachments/assets/eb2e0976-fa64-45d5-81e5-b2000fa41581" width="600"/>

## 목차

- [편의점 소개](#편의점-소개)
- [시작하기](#시작하기)
- [프로그램 흐름](#✅-프로그램-흐름)
- [기능 목록](#✅-기능-목록)
- [예외 상황](#❌-예외-상황)
- [입출력 예시](#입출력-예시)

&nbsp;

## 편의점 소개

> javascript로 구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산하고 안내하는 결제 시스템을 가진 편의점을 구현한 프로그램입니다.

- 편의점에서는 환영 인사와 함께 상품명, 가격, 프로모션 이름, 재고를 안내합니다.
- 구매하실 상품명과 수량을 입력 받습니다.
- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우, 혜택에 대한 안내합니다.
  - 이에 대한 고객의 답변을 받습니다. (답변은 Y,N로만 가능합니다.)
- 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부에 대한 안내합니다.
  - 이에 대한 고객의 답변을 받습니다. (답변은 Y,N로만 가능합니다.)
- 멤버십 할인 적용 여부를 묻습니다.
  - 이에 대한 고객의 답변을 받습니다. (답변은 Y,N로만 가능합니다.)
- 구매 상품 내역, 증정 상품 내역, 금액 정보를 가지는 영수증을 출력합니다.
- 추가 구매 여부를 묻습니다.

  - 이에 대한 고객의 답변을 받습니다. (답변은 Y,N로만 가능합니다.)

- 잘못된 값을 입력할 경우 "[ERROR]"로 시작하는 메시지와 함께 Error를 발생시키고 해당 메시지를 출력한 다음 해당 지점부터 다시 입력을 받습니다.

&nbsp;

- 상품 목록은 public/products.md에 저장되어 있습니다.
- 프로모션 목록은 public/promotions.md에 저장되어 있습니다.
- 두 파일 모두 내용의 형식을 유지한다면 값은 수정할 수 있습니다.

## 시작하기

해당 레파지토리를 clone하기

```
git clone https://github.com/seong-hui/javascript-convenience-store-7-seong-hui.git
```

npm 설치하기

```
npm install
```

main브랜치에서 프로그램 실행하기

```
npm run start
```

해당 미션은 Node.js 20.17.0 버전에서 실행 가능가능합니다.

&nbsp;

## ✅ 프로그램 흐름

- 상품 목록 안내하기
- 구매할 상품명과 수량을 입력 받기
- 프로모션 제품일 경우 프로모션 관련 사항 물어보기
- 멤버심 할인 관련 사항 물어보기
- 영수증 출력하기
- 결제된 수량만큼 해당 상품의 재고에서 차감하기
- 추가 구매 여부 확인하기

## ✅ 기능 목록

### 상품 목록 저장 및 안내

- [x] products.md 파일 읽기
- [x] 파일에서 이름, 가격, 수량, 프로모션 이름을 파싱하기
- [x] 유일한 상품 리스트 저장하기
- [x] 파싱한 상품의 이름과 가격을 각각 저장하기
- [x] 프로모션인 상품을 담는 박스와 일반 상품을 담는 박스 구별하기
- [x] 상품 목록 출력하기

### 프로모션 내용 저장

- [x] promotions.md 파일 읽기
- [x] 파일에서 이름, buy, get, 시작 날짜, 종료 날짜 파싱하기
- [x] 파싱한 프로모션 데이터 저장하기

### 구매할 상품명과 수량을 입력 받기

- [x] 구매할 상품과 수량을 입력 받기
- [x] 구매할 상품과 수량 형식 맞는지 확인 ([콜라-10] 이와 같은 형식인가)
- [x] 구매할 상품 장바구니에 저장하기

### 재고 관리

- [x] 각 상품의 재고 수량을 고려하여 결제 가능 여부 확인하기
- [x] 고객이 구매 후 결제된 수량만큼 상품 재고 차감

### 프로모션 할인

- [x] 프로모션 기간 확인하기
- [x] 프로모션을 적용해서 증정으로 받는 수량 계산하기
- [x] 프로모션을 적용한 수량만큼 재고가 있는지 확인하기
  - [x] 재고가 충분하지 않을 경우 : 프로모션이 적용되지 않는 상품 개수 알리기
- [x] 프로모션 수만큼 가져왔는가 확인하기
  - [x] 가져오지 않은 경우 : 추가하시겠는지 물어보기
- [x] 프로모션 할인 적용하기

### 멤버십 할인

- [x] 프로모션 재고에서 구입하지 않은 상품을 더한 금액 구하기
- [x] 프로모션 제외한 금액의 30%만큼 할인 금액 계산하기
- [x] 할인 금액이 8000원 넘을 시 최대 8000원 할인하기

### 결제 금액 계산

- [x] 상품별 가격과 수량을 곱하여 총구매액 계산하기
- [x] 행사 할인 금액 계산하기 (프로모션에 의해 할인된 금액)
- [x] 멤버십 할인 금액 계산하기 (멤버십에 의해 할인된 금액)
- [x] 최종 결제 금액 계산하기

### 입력

- [x] 구매할 상품과 수량 입력 받기
- [x] 프로모션 제품일 경우 프로모션 관련 사항에 대한 응답 입력 받기
- [x] 멤버십 할인 적용 여부를 입력 받기
- [x] 추가 구매를 진행 여부 입력 받기

### 출력

- [x] 환영 인사 출력
- [x] 상품명, 가격, 프로모션 이름, 재고 안내 내용 출력
- [x] 영수증 출력
- [x] 에러 출력

## ❌ 예외 상황

- [x] 구매할 상품과 수량 형식이 올바르지 않은 경우
- [x] 존재하지 않는 상품을 입력한 경우
- [x] 구매 수량이 1이상 Number.MAX_SAFE_INTEGER 이하가 아닌 경우
- [x] 구매 수량이 재고 수량을 초과한 경우
- [x] (Y/N)에 대한 질문에 바르게 응답하지 않은 경우
- [x] products.md나 promotions.md를 읽오지 못한 경우 에러 후 종료
- [x] promotions.md의 get값이 1이상 Number.MAX_SAFE_INTEGER 이하가 아닌 경우 에러 후 종료

&nbsp;

## 입출력 예시

### 전체 실행 결과 예시

```

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[컵라면-1],[콜라-2],[비타민워터-2]

현재 컵라면 1개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
Y

현재 콜라은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
N

멤버십 할인을 받으시겠습니까? (Y/N)
Y

==============W 편의점================
상품명                  수량    금액
컵라면                  1       1,700
콜라                    2       2,000
비타민워터              2       3,000
============증          정============
======================================
총구매액                5       6,700
행사할인                        -0
멤버십할인                      -900
내실돈                           5,800

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
N
```

&nbsp;
